<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Coach Tagebuch – EHCB U18</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
:root {
  --ehcb-blue: #002d5b;
  --ehcb-yellow: #ffc700;
  --ehcb-white: #fff;
  --ehcb-red: #d0021b;
}
html, body {
  margin: 0; padding: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #073166;
  color: var(--ehcb-white);
  min-height: 100vh;
  width: 100vw;
  overflow-x: hidden;
}
header { margin-bottom: 0.4rem; }
.header-logo { max-width: 112px; display: block; margin: 20px auto 10px auto; }
.main-title, h2 {
  color: #ffc700 !important;
  text-align: center;
  font-size: 2.2rem;
  font-weight: 900;
  margin-bottom: 1.1rem;
  letter-spacing: 2px;
}
#coachSection h2 { color: #ffc700 !important; font-size: 1.5rem; font-weight: bold; text-align: center; }
label {
  color: #ffc700 !important;
  font-size: 1.09rem;
}
.coach-diary-card { background:#fff;color:#002d5b; border-radius:13px; padding:1.2rem; box-shadow:0 2px 14px #0002; margin-bottom:1rem;}
.coach-diary-date { color:#888; font-size:1.06rem;}
.emoji { font-size:1.25em; }
.yellow-slogan {
  margin: 2.1rem auto 1.1rem auto;
  background: #ffc700;
  color: #002d5b;
  text-align: center;
  font-size: 2.1rem;
  font-weight: bold;
  border-radius: 0;
  width: 100vw;
  max-width: none;
  padding: 0.8rem 1rem 0.7rem 1rem;
  letter-spacing: 1.4px;
  box-shadow: 0 1px 7px #0002;
  box-sizing: border-box;
  overflow-x: hidden;
}
footer { text-align:center; margin-top: 0.7rem; color: #fff; opacity: 0.77; font-size: 1rem; }

/* Zurück-Button */
.back-btn {
  display: inline-block;
  margin: 18px 0 0 14px;
  padding: 9px 20px;
  border: 2px solid #ffc700;
  border-radius: 15px;
  background: transparent;
  color: #ffc700;
  font-size: 1.18rem;
  font-weight: 700;
  text-decoration: none;
  transition: background 0.18s, color 0.18s;
  box-shadow: 0 1px 8px #0012;
  position: relative;
  z-index: 2;
}
.back-btn:hover {
  background: #ffc700;
  color: #002d5b;
}

.form-block {
  background: #012046;
  border-radius: 26px;
  box-shadow: 0 10px 38px #0004;
  padding: 36px 6vw 28px 6vw;
  margin: 32px auto 22px auto;
  max-width: 430px;
  width: 99vw;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  align-items: stretch;
  animation: fadeIn .65s;
  border: 1.5px solid #11356d;
  box-sizing: border-box;
  overflow-x: hidden;
}

@keyframes fadeIn {
  0% { transform: translateY(25px) scale(.97); opacity: 0.4;}
  100% { transform: none; opacity: 1;}
}

input[type="text"], button {
  border: 1.5px solid #bbb; border-radius: 14px;
  background: #fff; color: #002d5b; padding: 18px 15px;
  font-size: 1.19rem; margin-bottom: 1.1rem;
  box-shadow: 0 1px 8px #2221;
  width: 100%;
  box-sizing: border-box;
  display: block;
  outline: none;
  transition: border .15s;
}
input[type="text"]:focus {
  border: 2px solid #ffc700;
  outline: none;
}
input[type="text"]::placeholder { color: #999; opacity: 1; }
button {
  background: #ffc700; color: #002d5b; border: none; border-radius: 16px;
  font-weight: bold; font-size: 1.21rem; padding: 19px 0;
  cursor: pointer; box-shadow: 0 2px 10px #2221;
  margin-bottom: 10px; margin-top: 8px;
  width: 100%;
  display: block;
  transition: background 0.18s, color 0.18s;
}
button:hover {
  background: #d0021b;
  color: #fff;
}

/* APP-LIKE Sprach-Buttons */
.lang-switcher {
  display: flex; 
  gap: 0.22rem; 
  justify-content: center; 
  margin-bottom: 1.05rem;
  width: 100%;
  max-width: 370px;
  margin-left: auto;
  margin-right: auto;
}
.lang-btn {
  background: var(--ehcb-yellow);
  color: var(--ehcb-blue);
  border: none;
  font-weight: 800;
  font-size: 1.14rem;
  cursor: pointer;
  transition: background .17s, color .17s;
  padding: 16px 0;
  flex: 1 1 0px;
  border-radius: 18px;
  margin: 0 5px;
  box-shadow: 0 2px 6px #0012;
  outline: none;
  min-width: 0;
  max-width: none;
}
.lang-btn.active, .lang-btn:focus {
  background: var(--ehcb-yellow);
  color: var(--ehcb-blue);
  box-shadow: 0 3px 14px #ffc70044;
}
.lang-btn:hover:not(.active) { 
  background: var(--ehcb-red); 
  color: #fff; 
}

@media (max-width: 700px) {
  html, body { width: 100vw; }
  .main-title, h2 { font-size: 1.15rem; margin-bottom: 7px; }
  .header-logo { max-width: 70px; margin-top: 10px;}
  .back-btn {
    font-size: 1rem;
    padding: 7px 13px;
    margin-left: 3vw;
    margin-top: 12px;
    border-width: 1.5px;
    max-width: 97vw;
    box-sizing: border-box;
  }
  .lang-switcher {
    max-width: 95vw !important;
    width: 95vw !important;
    padding-left: 1vw;
    padding-right: 1vw;
    margin-bottom: 1.4rem;
    gap: 0.18rem;
  }
  .lang-btn {
    font-size: 1.09rem;
    padding: 13px 0;
    margin: 0 2px;
    border-radius: 14px;
  }
  button { font-size: 1.07rem; padding: 15px 0; max-width: 99vw !important; width: 99vw !important; border-radius: 14px; }
  .coach-diary-card { padding: 0.93rem 0.47rem; border-radius: 11px;}
  input[type="text"] { font-size: 1.05rem; padding: 13px 8px; max-width: 99vw !important; width: 99vw !important; border-radius: 14px;}
  .form-block {
    max-width: 97vw !important;
    width: 97vw !important;
    padding: 15px 2vw 15px 2vw;
    border-radius: 15px;
    margin: 12px auto 8px auto;
  }
  .yellow-slogan {
    font-size: 1.10rem;
    border-radius: 7px;
    padding: 0.7rem 0.5rem;
    max-width: 99vw;
    width: 99vw;
  }
}
</style>
</head>
<body>
  <a class="back-btn" href="index.html">← Zurück</a>
  <header>
    <img src="wikinger.png" class="header-logo" alt="Logo" />
    <div class="main-title">Coach – Tagebuch Einträge</div>
  </header>
  <div class="form-block">
    <div class="lang-switcher">
      <button class="lang-btn" id="btn-de">DE</button>
      <button class="lang-btn" id="btn-fr">FR</button>
      <button class="lang-btn" id="btn-en">EN</button>
    </div>
    <section id="coachSection">
      <h2 id="coachTitle" class="main-title">Freigegebene Einträge suchen</h2>
      <input type="text" id="searchCode" placeholder="Code (z.B. U18-23-012)">
      <button id="btn-search" onclick="searchDiary()">Einträge anzeigen</button>
    </section>
    <section id="coachResultSection" style="display:none;">
      <ul id="coachDiaryList" style="list-style:none;padding:0;"></ul>
    </section>
  </div>
  <section class="yellow-slogan" id="slogan">
    "OUR STRENGTH IS OUR UNITY!"
  </section>
  <footer>
    © 2025 EHC Biel-Bienne U18-Elit
  </footer>
  <script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbx26Nld52aQijWOTEbTE6EQ9yLQTUF0iRsudCQV_35OS7a9XDF6wMkjxtNGx83lPH7raw/exec'; // Anpassen, falls nötig

    function searchDiary() {
      const code = document.getElementById('searchCode').value.trim();
      if (!code) return alert('Bitte Code eingeben!');
      fetch(`${scriptUrl}?code=${encodeURIComponent(code)}`)
        .then(r=>r.json())
        .then(entries=>{
          const ul = document.getElementById('coachDiaryList');
          ul.innerHTML = '';
          entries.reverse().forEach(e=>{
            if (e.coachOk === "true" || e.coachOk === true) {
              const li = document.createElement('li');
              li.className = 'coach-diary-card';
              li.innerHTML = `
                <div class="coach-diary-date">${
                  e.date && !isNaN(Number(e.date)) && String(e.date).length >= 13
                    ? new Date(Number(e.date)).toLocaleString()
                    : "(kein Datum)"
                } <span class="emoji">${e.mood||""}</span></div>
                <div class="coach-diary-text">${e.text}</div>
              `;
              ul.appendChild(li);
            }
          });
          document.getElementById('coachResultSection').style.display = '';
        });
    }

    // Sprachumschaltung
    const coachTranslations = {
      de: {
        coachTitle: "Freigegebene Einträge suchen",
        searchBtn: "Einträge anzeigen",
        codePlaceholder: "Code (z.B. U18-23-012)",
        slogan: "\"OUR STRENGTH IS OUR UNITY!\""
      },
      fr: {
        coachTitle: "Rechercher les entrées validées",
        searchBtn: "Afficher les entrées",
        codePlaceholder: "Code (ex: U18-23-012)",
        slogan: "\"NOTRE FORCE EST NOTRE UNITÉ !\""
      },
      en: {
        coachTitle: "Search released entries",
        searchBtn: "Show entries",
        codePlaceholder: "Code (e.g. U18-23-012)",
        slogan: "\"OUR STRENGTH IS OUR UNITY!\""
      }
    };
    let coachLang = localStorage.getItem('coach_lang') || 'de';

    function changeCoachLanguage(lang) {
      coachLang = lang;
      localStorage.setItem('coach_lang', lang);
      document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById('btn-' + lang).classList.add('active');
      const t = coachTranslations[lang];
      document.getElementById('coachTitle').textContent = t.coachTitle;
      document.getElementById('btn-search').textContent = t.searchBtn;
      document.getElementById('searchCode').placeholder = t.codePlaceholder;
      document.getElementById('slogan').textContent = t.slogan;
    }
    window.addEventListener('DOMContentLoaded', function() {
      changeCoachLanguage(coachLang);
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.onclick = () => changeCoachLanguage(btn.id.replace('btn-',''));
      });
    });
  </script>
</body>
</html>