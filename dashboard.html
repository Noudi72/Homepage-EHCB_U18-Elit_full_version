<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Coach Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="ehcb-icon.png" type="image/png" />
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <style>
    :root {
      --ehcb-blue: #002d5b;
      --ehcb-yellow: #ffc700;
      --ehcb-white: #fff;
      --ehcb-grey: #f5f5f5;
    }
    html, body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #073166;
      color: var(--ehcb-white);
      min-height: 100vh;
    }
    .header-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.2rem;
      position: relative;
    }
    .back-btn {
      position: absolute;
      top: 22px;
      left: 22px;
      z-index: 10;
      background: #002b5c;
      color: #ffd600;
      font-weight: bold;
      border: 2px solid #ffd600;
      border-radius: 10px;
      padding: 12px 32px 10px 20px;
      font-size: 1.19rem;
      text-decoration: none;
      transition: background .18s, color .18s;
      box-shadow: 0 2px 14px #0002;
    }
    .back-btn:hover { background: #ffd600; color: #002b5c; }
    .header-logo {
      width: 120px;
      margin-bottom: 0.4rem;
      margin-top: 1.2rem;
    }
    .header-title {
      color: #ffc700;
      font-size: 2.1rem;
      font-weight: 900;
      letter-spacing: 2px;
      text-shadow: 2px 3px 8px #1a1a1a, 0 1px 0 #222;
      margin-bottom: 0.35rem;
      text-align: center;
    }
    .lang-switcher {
      display: flex;
      gap: 0.45rem;
      margin-bottom: 0.7rem;
    }
    .lang-btn {
      background: #fff;
      color: #002d5b;
      border: none;
      border-radius: 8px;
      padding: 7px 35px;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 1px 8px #2222;
      transition: background 0.18s;
      outline: none;
    }
    .lang-btn.active, .lang-btn:focus {
      background: #ffc700;
      color: #002d5b;
    }
    .lang-btn:hover:not(.active) {
      background: #d0021b;
      color: #fff;
    }
    @media (max-width: 700px) {
      .header-inner { gap: 0.3rem; }
      .header-logo { width: 56px; margin-top: 0.6rem; }
      .header-title { font-size: 1.13rem; }
      .lang-btn { font-size: 1rem; padding: 7px 13vw; }
      .lang-switcher { gap: 0.18rem; }
      .back-btn { top: 7px; left: 6px; font-size: 1rem; padding: 8px 13px 7px 10px; }
    }
    .main-content { max-width: 900px; margin: 0 auto; }
    .login-card {
      background: transparent;
      max-width: 900px;
      margin: 0 auto;
      padding: 0;
      text-align: center;
      border: none;
      border-radius: 8px;
    }
    .login-card input[type="password"] {
      width: 95%;
      max-width: 620px;
      margin: 0.9rem auto 0.9rem auto;
      padding: 16px;
      font-size: 1.12rem;
      border-radius: 7px;
      border: 1.4px solid #bbb;
      box-shadow: 0 1px 6px #2221;
      display: block;
      background: #fff;
      color: #002d5b;
    }
    .login-card button {
      width: 95%;
      max-width: 620px;
      display: block;
      margin: 0.2rem auto 0.4rem auto;
      background: #d0021b;
      color: #fff;
      border: none;
      border-radius: 7px;
      font-weight: 700;
      font-size: 1.23rem;
      padding: 12px 0;
      cursor: pointer;
      transition: background .15s;
    }
    .login-card button:hover { background: #ffc700; color: #002d5b; }
    .yellow-slogan {
      margin: 2.1rem auto 1.1rem auto;
      background: #ffc700;
      color: #002d5b;
      text-align: center;
      font-size: 2.1rem;
      font-weight: bold;
      border-radius: 0.2rem;
      max-width: 100vw;
      padding: 0.8rem 1rem 0.7rem 1rem;
      letter-spacing: 1.4px;
      box-shadow: 0 1px 7px #0002;
    }
    .feedback-list {
      margin-top: 2.3rem;
      margin-bottom: 2.7rem;
    }
    .feedback-card {
      background: #fff;
      color: #002d5b;
      border-radius: 9px;
      box-shadow: 0 2px 10px #0002;
      padding: 1.2rem 1.4rem;
      margin-bottom: 1.15rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .feedback-card .f-header {
      display: flex;
      flex-wrap: wrap;
      gap: 1.3rem;
      align-items: baseline;
      margin-bottom: 0.7rem;
      font-weight: bold;
    }
    .feedback-card .f-name {
      font-size: 1.21rem;
      font-weight: 700;
      margin-right: 1.2rem;
    }
    .feedback-card .f-date {
      color: #7a7a7a;
      font-size: 0.97rem;
    }
    .feedback-card .f-row {
      margin-bottom: 0.21rem;
      font-size: 1.08rem;
    }
    .feedback-card .f-label {
      font-weight: bold;
      margin-right: 0.41rem;
    }
    @media (max-width: 700px) {
      .feedback-card { padding: 1rem 0.7rem; }
      .feedback-list { margin-top: 1.2rem; }
    }
    footer {
      text-align: center;
      color: #fff;
      font-size: 1.04rem;
      margin-bottom: 0.6rem;
      margin-top: 2.2rem;
      opacity: 0.93;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <a class="back-btn" href="index.html" id="backBtn">‚Üê Back</a>
      <img src="wikinger.png" class="header-logo" alt="Logo" />
      <div class="header-title" id="main-title">EHC BIEL-BIENNE U18-ELIT</div>
      <div class="lang-switcher">
        <button class="lang-btn" id="btn-de">DE</button>
        <button class="lang-btn" id="btn-fr">FR</button>
        <button class="lang-btn" id="btn-en">EN</button>
      </div>
    </div>
  </header>
  <div class="main-content">
    <!-- Admin Login -->
    <section class="login-card" id="login-section">
      <h2 style="color:var(--ehcb-yellow);text-align:center;font-size:1.23rem;margin-bottom:1.15rem;" id="loginTitle">
        üîê Coach Dashboard Login
      </h2>
      <input type="password" id="password" placeholder="Admin Passwort eingeben" autocomplete="current-password" />
      <button onclick="checkPassword()" id="loginBtn">Login</button>
      <div id="login-msg"></div>
    </section>
    <!-- Dashboard Content (hidden by default) -->
    <div id="dashboard-section" style="display:none;">
      <div class="feedback-list" id="feedback-list"></div>
    </div>
  </div>
  <section class="yellow-slogan" id="slogan">
    "OUR STRENGTH IS OUR UNITY!"
  </section>
  <footer>
    ¬© 2025 EHC Biel-Bienne U18-Elit
  </footer>
  <script>
    // Sprachumschaltung identisch zu kalender.html!
    const translations = {
      de: { mainTitle: "EHC BIEL-BIENNE U18-ELIT", loginTitle: "üîê Coach Dashboard Login", loginBtn: "Login", slogan: "\"OUR STRENGTH IS OUR UNITY!\"", back: "‚Üê Back", noFeedbacks: "Keine Feedbacks vorhanden." },
      fr: { mainTitle: "EHC BIEL-BIENNE U18-√âLITE", loginTitle: "üîê Connexion Dashboard Coach", loginBtn: "Connexion", slogan: "\"NOTRE FORCE EST NOTRE UNIT√â !\"", back: "‚Üê Retour", noFeedbacks: "Aucun feedback disponible." },
      en: { mainTitle: "EHC BIEL-BIENNE U18-ELITE", loginTitle: "üîê Coach Dashboard Login", loginBtn: "Login", slogan: "\"OUR STRENGTH IS OUR UNITY!\"", back: "‚Üê Back", noFeedbacks: "No feedbacks yet." }
    };
    let currentLang = localStorage.getItem('dashboard_lang') || 'de';
    function changeLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('dashboard_lang', lang);
      document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById('btn-' + lang).classList.add('active');
      const t = translations[lang];
      document.getElementById('main-title').textContent = t.mainTitle;
      document.getElementById('loginTitle').textContent = t.loginTitle;
      document.getElementById('loginBtn').textContent = t.loginBtn;
      document.getElementById('backBtn').textContent = t.back;
      document.getElementById('slogan').textContent = t.slogan;
      // Feedback-List auch √ºbersetzen
      if (typeof renderFeedbacks === "function" && window._feedbacks) renderFeedbacks(window._feedbacks);
    }
    window.addEventListener('DOMContentLoaded', () => { changeLanguage(currentLang); });
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.onclick = () => changeLanguage(btn.id.replace('btn-',''));
    });

    // Firebase INIT (ersetze durch dein eigenes Config)
    const firebaseConfig = {
  apiKey: "AIzaSyCCvHZN1q72UQLqrkgWb-L5X6A4WesHqRw",
  authDomain: "ehcb-news.firebaseapp.com",
  projectId: "ehcb-news",
  storageBucket: "ehcb-news.firebasestorage.app",
  messagingSenderId: "250325515447",
  appId: "1:250325515447:web:81f10ce4ac286d10b92132"
};
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();

    // Admin Login
    const correctPassword = "Coach7274";
    function checkPassword() {
      const input = document.getElementById("password").value;
      const msg = document.getElementById("login-msg");
      if (input === correctPassword) {
        msg.textContent = '';
        document.getElementById("dashboard-section").style.display = "block";
        document.getElementById("login-section").style.display = "none";
        loadFeedbacks();
      } else {
        msg.textContent = "‚ùå Wrong password.";
      }
    }
    document.getElementById('password').addEventListener('keyup', function(e){
      if(e.key === "Enter") checkPassword();
    });

    // Feedbacks laden & anzeigen
    function loadFeedbacks() {
      db.collection('feedbacks').orderBy('timestamp', 'desc').onSnapshot(snapshot => {
        const feedbacks = [];
        snapshot.forEach(doc => {
          feedbacks.push({ id: doc.id, ...doc.data() });
        });
        window._feedbacks = feedbacks;
        renderFeedbacks(feedbacks);
      });
    }

    function renderFeedbacks(feedbacks) {
      const t = translations[currentLang];
      const list = document.getElementById('feedback-list');
      list.innerHTML = '';
      if (!feedbacks.length) {
        const p = document.createElement('p');
        p.textContent = t.noFeedbacks;
        p.style.color = "#ffc700";
        p.style.textAlign = "center";
        p.style.fontWeight = "bold";
        list.appendChild(p);
        return;
      }
      feedbacks.forEach(fb => {
        const card = document.createElement('div');
        card.className = "feedback-card";
        // Kopfzeile (Name, Datum)
        const head = document.createElement('div');
        head.className = "f-header";
        const name = document.createElement('span');
        name.className = "f-name";
        name.textContent = fb.name || "-";
        const date = document.createElement('span');
        date.className = "f-date";
        const dt = fb.timestamp ? new Date(fb.timestamp) : null;
        date.textContent = dt ? dt.toLocaleDateString(currentLang, { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'}) : "";
        head.appendChild(name);
        head.appendChild(date);
        card.appendChild(head);
        // Alle Felder anzeigen
        card.innerHTML += `
          <div class="f-row"><span class="f-label">üß† Stimmung:</span> ${fb.feeling || "-"}</div>
          <div class="f-row"><span class="f-label">‚ö° Energie-Level:</span> ${fb.energy || "-"}</div>
          <div class="f-row"><span class="f-label">üî• Intensit√§t:</span> ${fb.intensity || "-"}</div>
          <div class="f-row"><span class="f-label">üéØ Eigene Leistung:</span> ${fb.performance || "-"}</div>
          <div class="f-row"><span class="f-label">üí¨ Kommentar:</span> ${fb.comment || "-"}</div>
        `;
        list.appendChild(card);
      });
    }
  </script>
</body>
</html>